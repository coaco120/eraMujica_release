;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#
;
;	角色口上 调教者行动前事件口上文件(調教者行動前イベント口上ファイル)
;
;	整合调教者行动前的所有事件口上脚本
;
;_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/_/#

;========================================================================
;EV12, 调教者行动前口上
;========================================================================
;・TRAIN_PROCCES.ERB内、@TRAIN_CANCELから呼び出される
;・由TRAIN_PROCCES.ERB内的@TRAIN_CANCEL调用
;・在口上主参数显示后立即显示，此时调教指令已确定
;・可用于替换中止声明，或在调教回合开始前添加主人台词
;・不同于上午/下午的调教开始，每次回合开始前都会调用
;・因此建议对非中止且耗时>0的情况使用IF 口上記入チェック(25)等进行概率控制
;・仅调教中止时存在场景描述文本
;・文本显示后将执行本体侧的DRAWLINE处理
;━━━━━━━━━━━━━━━━━━━━━━━━
;虽然使用FIRSTEVENT(0)～FIRSTEVENT(10)等按框架分配
;但FIRSTEVENT/ONCEEVENT/RANDEVENT/ORDEREVENT理论上可无限扩展事件编号
;请根据需求自由分配使用
;-------------------------------------------------
@KOJO_EVENT_K99_12(ARG)
;-------------------------------------------------
参数说明...
;ARG(0=可调教/1=因口上主疲劳中止/2=因调教对象疲劳中止/3=因奖励中止)
;━━━━━━━━━━━━━━━━━━━━━━━━

;────────────────────────────────────
;调教中止 ARG:1 ARG:2 ARG:3 FIRSTEVENT(0)～
;────────────────────────────────────
;・因疲劳或奖励导致调教中止时的口上
;・当记入检查=1时，口上显示后将插入本体侧的PRINTL空行
;・设为记入检查=2则不显示场景描述文本
;・实际上通过RESULT>2判断，但建议不要使用该参数范围
;━━━━━━━━━━━━━━━━━━━━━━━━
;因奖励中止
;RESULT值（1=口上后显示场景文本(不推荐)，2=仅显示口上）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && ARG == 3
	;当记入检查值≤2时，将在口上显示后输出以下场景描述：
	;%CALLNAME:TARGET%中止了今日的调教，
	;与%CALLNAME:MASTER%共度了悠闲时光…
	PRINTFORMW 
	RETURN 2
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;因调教者疲劳中止
;RESULT值（1=口上后显示场景文本(不推荐)，2=仅显示口上）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック() && ARG == 1
	;当记入检查值（記入チェック）≤2时，将在口上显示后输出以下场景描述：
	;虽到调教时间，但%CALLNAME:TARGET%进门时显得十分疲惫，
	;说了句"这次休息"便离开了…
	PRINTFORMW 「今天有些疲倦呢」
	PRINTFORMW 「本以为还能继续的...看来是年纪大了呢」
	RETURN 2
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;因调教对象疲劳中止
;RESULT值（1=口上后显示场景文本(不推荐)，2=仅显示口上）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && ARG == 2
	;当记入检查值（記入チェック）≤2时，将在口上显示后输出以下场景描述：
	;虽到调教时间，但%CALLNAME:TARGET%看到%CALLNAME:MASTER%的糟糕状态后沉思片刻，
	;说了句"这次可以休息"便离开了…
	PRINTFORMW 
	RETURN 2
ENDIF

;-------------------------------------------------
;・以下对应ARG:0(可调教)状态
;・由TRAIN_PROCCES.ERB中的@BEFORE_ACT调用
;・此时ACT指令已确定但未衍生具体动作
;・NOWEX尚未重置
;・执行完下列处理后将开始ACT
;・可自由增减分支，但需注意优先级
;-------------------------------------------------

;────────────────────────────────────
;调教开始瞬间 FIRSTEVENT(10)～
;────────────────────────────────────
;・在耗时=0时显示
;・当次调教开始后仅出现一次，后续不再显示
;・执行完毕后将开始ACT指令
;-------------------------------------------------
;　虽然可以在此通过IS_POLICY("今日","お仕置き")等指令说明当日方针
;　但可能与EVENT17(当日方针口上)产生重复
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;調教開始直後
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック() && !TFLAG:経過時間
	;=================================================
	;调教者轻度疲劳状态
	;=================================================
	IF 口上記入チェック() && CFLAG:消耗 > 2
		PRINTFORMW 「哈啊…哈啊…好…开始吧…」
		RETURN 1
	ENDIF
	
	;ARG:3の分岐を書いた場合は不要な箇所
	;=================================================
	;因奖励中止调教
	;=================================================
	IF 口上記入チェック(0) && IS_POLICY("今日", "休憩")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;ARG:1の分岐を書いた場合は不要な箇所
	;=================================================
	;因调教对象疲劳中止
	;=================================================
	IF 口上記入チェック() && CFLAG:MASTER:消耗 > 5
		;PRINTFORMW 「看来你累了呢。今天休息吧」
		RETURN 1
	ENDIF
	
	;=================================================
	;调教对象轻度疲劳
	;=================================================
	IF 口上記入チェック() && CFLAG:MASTER:消耗 > 2
		PRINTFORMW 「看起来有点累了呢……没问题吧？」
		RETURN 1
	ENDIF
	
	;=================================================
	;调教对象的好感度1000以上
	;=================================================
	IF 口上記入チェック(0) && AFFECTION("眷愛")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;其他・无条件
	;=================================================
	IF 口上記入チェック()
		PRINTFORMW 「看起来状态不错呢。开始吧」
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;惩罚 FIRSTEVENT(20)～
;────────────────────────────────────
;・当TFLAG:お仕置激活时显示
;・即使惩罚flag激活，仍可能执行非虐待系ACT
;-------------------------------------------------
;虐待系ACT及可能衍生的行为：
;深喉强制/要求换装/诡异笑容/肛门震动棒/后入式/肛交/自慰/野外play/放尿/强制舔足
;异常系ACT/性交侍奉系ACT
;除上述ACT外，其他行为将受TFLAG:お仕置flag通过ACT_ABLE限制（v0616版）
;-------------------------------------------------
;-------------------------------------------------
;・单次调教中仅显示一次
;━━━━━━━━━━━━━━━━━━━━━━━━
;惩罚开始
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && TFLAG:お仕置きフラグ && ONCEEVENT(20)
	;=================================================
	;前回ACTがお仕置き宣言
	;=================================================
	IF 口上記入チェック(0) && IS_PREVACTNAME("お仕置きと宣言する")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;其他・无条件
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;-------------------------------------------------
;处理非惩罚开始事件(お仕置き開始以外を処理する箇所)
;━━━━━━━━━━━━━━━━━━━━━━━━
;惩罚执行中
;口上记入检查(概率%, 按设定概率显示口上)
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && TFLAG:お仕置きフラグ
	;=================================================
	;当上次ACT为惩罚宣言且本次ACT属虐待系
	;=================================================
	IF 口上記入チェック(0) && MENUMATCH(TFLAG:ACT, "加虐") && IS_PREVACTNAME("お仕置きと宣言する")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;前次ACT为惩罚宣言
	;=================================================
	IF 口上記入チェック(0) && IS_PREVACTNAME("お仕置きと宣言する")
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;其他・无条件
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;阴道/直肠内射精后 FIRSTEVENT(30)～
;────────────────────────────────────
;虽然可通过NOWEX:射精或NOWEX:MASTER:射精参照射精类型
;但可能与EVENT20高潮口上的同类分支产生重复
;-------------------------------------------------
;关联变量...
;
;TFLAG:前回中出し(1=阴道性交/2=阴道性交侍奉/3=阴道性交(空射)/4=阴道性交侍奉(空射)/5=肛门性交/6=肛门性交侍奉/7=肛门性交(空射)/8=肛门性交侍奉(空射))
;NOWEX:射精(1=空射/2=普通射精/3=大量射精/4=早泄射精/5=肛门责射精)
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;阴道内射精后(调教对象→调教者)
;口上记入检查（口上記入チェック）（概率%, 按设定概率显示口上）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック() && GROUPMATCH(TFLAG:前回中出し, 2, 4)
	;=================================================
	;空射精
	;=================================================
	IF 口上記入チェック() && TFLAG:前回中出し == 4
		PRINTFORMW 「射不出来呢……」
		PRINTFORMW 「该不会已经全部射完了吧？」
		RETURN 1
	ENDIF
	
	;=================================================
	;空射精以外
	;=================================================
	IF 口上記入チェック()
		PRINTFORMW 「喂喂、还能射更多吧？」
		RETURN 1
	ENDIF
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;直肠内射精后(调教对象→调教者)
;口上记入检查（口上記入チェック）（概率%, 按设定概率显示口上）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック() && GROUPMATCH(TFLAG:前回中出し, 6, 8)
	;=================================================
	;空射精
	;=================================================
	IF 口上記入チェック() && TFLAG:前回中出し == 8
		PRINTFORMW 「明明都颤抖了却射不出来……」
		PRINTFORMW 「是不是榨取得有点过头了呢？」
		RETURN 1
	ENDIF
		
	;=================================================
	;空射精以外
	;=================================================
	IF 口上記入チェック()
		PRINTFORMW 「射得相当猛烈呢」
		RETURN 1
	ENDIF
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;阴道内射精后(调教者→调教对象)
;口上记入检查（口上記入チェック）（概率%, 按设定概率显示口上）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック() && GROUPMATCH(TFLAG:前回中出し, 1, 3)
	;=================================================
	;空射精
	;=================================================
	IF 口上記入チェック() && TFLAG:前回中出し == 3
		PRINTFORMW 「不行了……已经射不出来了」
		RETURN 1
	ENDIF
	
	;=================================================
	;空射精以外
	;=================================================
	IF 口上記入チェック()
		PRINTFORMW 「射这么多的话...可能会怀孕呢」
		RETURN 1
	ENDIF
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;直肠内射精后(调教者→调教对象)
;口上记入检查（口上記入チェック）（概率%, 按设定概率显示口上）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック() && GROUPMATCH(TFLAG:前回中出し, 5, 7)
	;=================================================
	;空射精
	;=================================================
	IF 口上記入チェック() && TFLAG:前回中出し == 7
		PRINTFORMW 「呜…真的再也射不出来了」
		RETURN 1
	ENDIF
	
	;=================================================
	;空射精以外
	;=================================================
	IF 口上記入チェック()
		PRINTFORMW 「能感觉到里面被灌满了吗？」
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;性交中・性交侍奉中 FIRSTEVENT(40)～
;────────────────────────────────────
;关联变量...
;TEQUIP:性交中(调教者插入对象时) (1=正常位/2=后入位/3=骑乘位/4=对坐位/5=背坐位/6=肛交)
;TEQUIP:性交侍奉中(对象插入调教者时) 内容同上
;
;关联函数...
;V_SEX (=TARGET, TEQUIP:性交中 < 6/=MASTER, TEQUIP:性交侍奉中 < 6) 同义
;A_SEX (=TARGET, TEQUIP:性交中 == 6/=MASTER, TEQUIP:性交侍奉中 == 6) 同义
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;性交中(调教者→调教对象)
;口上记入检查（口上記入チェック）（概率%, 按设定概率显示口上）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(50) && TEQUIP:性交中
	;=================================================
	;阴茎束带使用
	;=================================================
	IF 口上記入チェック(0) && TRUECHECK(!PENIS(TARGET), TEQUIP:調教者ペニスバンド) > 0
		;肛交进行时
		IF A_SEX()
			PRINTFORMW 
		;其他性交类别
		ELSE
			PRINTFORMW 
		ENDIF
		RETURN 1
	ENDIF
	
	;=================================================
	;肛交(Ａ性交)
	;=================================================
	IF 口上記入チェック() && A_SEX()
		SELECTCASE RANDEVENT(2, 0)
			CASE 0
				PRINTFORMW 「呵呵，和阴道不同可以尽情深入到底呢……」
				PRINTFORMW 「来！ 给我用更甜美的声音喘息！」
			CASE 1
				;忽略阴茎撞击模式
				PRINTFORMW 「正在紧紧地收缩着呢……」
				PRINTFORMW 「快发出更可爱的声音！ 你这变态！」
		ENDSELECT
		RETURN 1
	ENDIF
	
	;=================================================
	;其他性交类别(Ｖ性交)
	;=================================================
	IF 口上記入チェック() && V_SEX()
		IF PENIS(TARGET)
			SELECTCASE RANDEVENT(4, 1)
				CASE 0
					PRINTFORMW 「怎么样？ 我的肉棒」
					PRINTFORMW 「会插得越来越深哦」
				CASE 1
					PRINTFORMW 「没想到会被我的肉棒插入吧？」
					PRINTFORMW 「呵呵...要插到你高潮为止呢」
				CASE 2
					PRINTFORMW 「太棒了...」
					PRINTFORMW 「你的阴道里...舒服极了...」
				CASE 3
					PRINTFORMW 「哈啊...太厉害了...！」
					PRINTFORMW 「阴道壁...缠上来了...！」
			ENDSELECT
		ENDIF
		RETURN 1
	ENDIF
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;性交侍奉中(调教对象→调教者)
;口上记入检查（口上記入チェック）（概率%, 按设定概率显示口上）
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック(0) && TEQUIP:性交奉仕中
	;=================================================
	;阴茎环使用中
	;=================================================
	IF 口上記入チェック(0) && TRUECHECK(!PENIS(MASTER), TEQUIP:ペニスバンド) > 0
		;肛交进行时
		IF A_SEX(MASTER)
			PRINTFORMW 
		;其他性交类别
		ELSE
			PRINTFORMW 
		ENDIF
		RETURN 1
	ENDIF
	
	;=================================================
	;肛交(Ａ性交奉仕)
	;=================================================
	IF 口上記入チェック(0) && A_SEX(MASTER)
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;其他性交侍奉类(Ｖ性交奉仕)
	;=================================================
	IF 口上記入チェック(0) && V_SEX(MASTER)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;;高潮后立即 FIRSTEVENT(50)～
;────────────────────────────────────
;・调教者或调教对象高潮时显示的口上
;・如需捕获特定部位的高潮，请添加 IF 口上記入チェック(0) && NOWEX:Ｃ絶頂等分支
;・射射精类型可通过NOWEX:射精/NOWEX:MASTER:射精参照
;-------------------------------------------------
;关联变量…
;NOWEX:射精(1=空射/2=普通射精/3=大量射精/4=早泄射精/5=肛门责射精)
;
;关联函数…
;TRUECHECK 返回为真的条件数量
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;调教者高潮后立即
;口上记入检查（口上記入チェック）（概率%, 按设定概率显示口上））
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック() && TRUECHECK(NOWEX:Ｃ絶頂, NOWEX:Ｖ絶頂, NOWEX:Ａ絶頂, NOWEX:Ｂ絶頂) > 0
	;=================================================
	;調教者射精
	;=================================================
	IF 口上記入チェック(20) && NOWEX:射精
		PRINTFORMW 「啊……射出来了」
		RETURN 1
	ENDIF
	
	;当任意部位高潮计数≥1时返回真值
	;=================================================
	;多重絶頂
	;=================================================
	IF 口上記入チェック(0) && TRUECHECK(NOWEX:Ｃ絶頂, NOWEX:Ｖ絶頂, NOWEX:Ａ絶頂, NOWEX:Ｂ絶頂) > 1
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;其他・无条件
	;=================================================
	IF 口上記入チェック(0)
		PRINTFORMW 
		RETURN 1
	ENDIF
ENDIF

;━━━━━━━━━━━━━━━━━━━━━━━━
;调教对象高潮后立即
;口上记入检查（口上記入チェック）（概率%, 按设定概率显示口上））
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック() && TRUECHECK(NOWEX:MASTER:Ｃ絶頂, NOWEX:MASTER:Ｖ絶頂, NOWEX:MASTER:Ａ絶頂, NOWEX:MASTER:Ｂ絶頂) > 0
	;=================================================
	;射精
	;=================================================
	IF 口上記入チェック(20) && NOWEX:MASTER:射精
		SELECTCASE RANDEVENT(2, 3)
			CASE 0
				PRINTFORMW 「射了这么多呢…积存了很久吗？」
			CASE 1
				PRINTFORMW 「还在发抖呢…里面还有残留吗？」
		ENDSELECT
		RETURN 1
	ENDIF
	
	;当任意部位高潮计数≥1时返回真值
	;=================================================
	;多重絶頂
	;=================================================
	IF 口上記入チェック(0) && TRUECHECK(NOWEX:MASTER:Ｃ絶頂, NOWEX:MASTER:Ｖ絶頂, NOWEX:MASTER:Ａ絶頂, NOWEX:MASTER:Ｂ絶頂) > 1
		PRINTFORMW 
		RETURN 1
	ENDIF
	
	;=================================================
	;其他・无条件
	;=================================================
	IF 口上記入チェック(0)
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;调教方针变更 FIRSTEVENT(60)
;────────────────────────────────────
;・当调教方针变更时显示
;・方针仅为指导原则，不具体决定每个行动
;-------------------------------------------------
;関連変数…
;TFLAG:ターン方針		本回合调教方针(1=休息/2=轻柔/3=普通/4=激烈/5=异常) (1=休憩/2=ソフト/3=ノーマル/4=ハード/5=異常)
;TFLAG:前ターン方針		前回合调教方针(内容同回合方针)
;
;关联函数…
;IS_POLICY 若符合调教方针名称则返回真值
;-------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;调教方针变更
;口上记入检查（口上記入チェック）（概率%, 按设定概率显示口上））
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック() && TFLAG:ターン方針 != TFLAG:前ターン方針
	;=================================================
	;回合方针1：休息（确保执行体力恢复行动）
	;=================================================
	IF 口上記入チェック() && IS_POLICY("今", "休憩")
		PRINTFORMW 「累了吧，稍微休息下」
		PRINTFORMW 「你也该休息了」
		RETURN 1
	ENDIF
	
	;=================================================
	;回合方针2：轻柔（以低刺激行为为主）
	;=================================================
	IF 口上記入チェック() && IS_POLICY("今", "ソフト")
		PRINTFORMW 「偶尔也该温柔对待你呢」
		RETURN 1
	ENDIF
	
	;=================================================
	;回合方针3：标准（均衡型调教模式）
	;=================================================
	IF 口上記入チェック() && IS_POLICY("今", "ノーマル")
		PRINTFORMW 「那么，开始正式调教吧」
		RETURN 1
	ENDIF
	
	;=================================================
	;回合方针4：激烈（追求极限的快感/痛苦）
	;=================================================
	IF 口上記入チェック() && IS_POLICY("今", "ハード")
		PRINTFORMW 「呵呵，接下来...」
		RETURN 1
	ENDIF
	
	;=================================================
	;回合方针5：异常（超越常规的极限状态)
	;=================================================
	IF 口上記入チェック() && IS_POLICY("今", "異常")
		PRINTFORMW 「那么，人类的肉体究竟能承受多少呢...」
		RETURN 1
	ENDIF
ENDIF

;────────────────────────────────────
;无条件 FIRSTEVENT(70)～
;────────────────────────────────────
;・当不满足前述任何条件时显示
;・BASE中已设置细分分支，但也可任意追加条件
;------------------------------------------------
;关联变量…
;BASE		(0, 体力/1, 気力/2, 射精/3, 母乳/4, 尿意/5, 理性/6, 興味/7, 苛立ち/8, 満足)
;
;关联函数…
;TENSION 表示参数指定的BASE值(≥50%为高，≥25%为一般，<25%为低)
;------------------------------------------------
;━━━━━━━━━━━━━━━━━━━━━━━━
;无条件
;口上记入检查（口上記入チェック）（概率%, 按设定概率显示口上））
;━━━━━━━━━━━━━━━━━━━━━━━━
IF 口上記入チェック()
	;=================================================
	;満足50％以上 satisfaction 50% or more
	;=================================================
	IF 口上記入チェック() && TENSION(TARGET, 8) == "高い"
		PRINTFORMW 「还挺能干的嘛」
		RETURN 1
	ENDIF
	
	;=================================================
	;理性25％以下 reason 25% or less
	;=================================================
	IF 口上記入チェック() && TENSION(TARGET, 5) == "低い"
		PRINTFORMW 「已经忍不住了...」
		RETURN 1
	ENDIF
	
	;=================================================
	;興味25％以下 interest 25% or less
	;=================================================
	IF 口上記入チェック() && TENSION(TARGET, 6) == "低い"
		PRINTFORMW 「真无聊呢」
		RETURN 1
	ENDIF
	
	;=================================================
	;苛立ち50％以上 irritation 50% or more
	;=================================================
	IF 口上記入チェック() && TENSION(TARGET, 7) == "高い"
		PRINTFORMW 「正如人所言"爱恨交织"」
		RETURN 1
	ENDIF
	
	;=================================================
	;其他・无条件 everything else
	;=================================================
	IF 口上記入チェック()
		PRINTFORMW 「接下来该做些什么呢...？」
		RETURN 1
	ENDIF
ENDIF
